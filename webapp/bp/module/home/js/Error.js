"use strict";

class Error {
  /**
   * 重定向
   *
   * @param redirectUrl 跳转地址
   * @param title 标题
   * @param content 内容
   * @param returnPageUrl 返回地址
   */
  static redirect(redirectUrl, title, content, returnUrl) {
    ////////////////////////////////////////////////////////////////////////////
    // 设置错误信息。
    ////////////////////////////////////////////////////////////////////////////
    AccountSecurity.setItem("error_title", title);
    AccountSecurity.setItem("error_content", content);
    AccountSecurity.setItem("error_return_url", returnUrl);
    ////////////////////////////////////////////////////////////////////////////
    // 跳转错误页。
    ////////////////////////////////////////////////////////////////////////////
    window.location.href = redirectUrl;
  }

  /**
   * 构造函数
   */
  constructor() {
  }

  /**
   * 生成代码
   */
  generateCode() {
    ////////////////////////////////////////////////////////////////////////////
    // [创建对象]容器。
    ////////////////////////////////////////////////////////////////////////////
    this.container = new JSControl("div");
    ////////////////////////////////////////////////////////////////////////////
    // [创建对象]信息表格。
    ////////////////////////////////////////////////////////////////////////////
    this.infoTable = new JSControl("table");
    ////////////////////////////////////////////////////////////////////////////
    // [设置属性]容器。
    ////////////////////////////////////////////////////////////////////////////
    this.container.setAttribute(
      {
        "class": "global_scroll global_scroll_dark container"
      }
    );
    ////////////////////////////////////////////////////////////////////////////
    // [设置属性]信息表格。
    ////////////////////////////////////////////////////////////////////////////
    this.infoTable.setAttribute(
      {
        "class": "global_table info_table"
      }
    );
    this.infoTable.setContent(`
      <thead><tr><td>${AccountSecurity.getItem("error_title")}</td></tr></thead>
      <tbody>
        <tr><td>${AccountSecurity.getItem("error_content")}&nbsp;&nbsp;<a href = "${AccountSecurity.getItem("error_return_url")}">[返回]</a></td></tr>
      </tbody>
    `);
    ////////////////////////////////////////////////////////////////////////////
    // [生成代码]容器。
    ////////////////////////////////////////////////////////////////////////////
    this.container.generateCode();
    ////////////////////////////////////////////////////////////////////////////
    // [生成代码]信息表格。
    ////////////////////////////////////////////////////////////////////////////
    this.infoTable.generateCode();
  }

  /**
   * 初始化视图
   */
  initView() {
    ////////////////////////////////////////////////////////////////////////////
    // [注释说明]页面添加容器。
    ////////////////////////////////////////////////////////////////////////////
    $("body").html(this.container.getCode());
    ////////////////////////////////////////////////////////////////////////////
    // [注释说明]容器添加信息表格。
    ////////////////////////////////////////////////////////////////////////////
    this.container.getObject().append(this.infoTable.getCode());
  }
}
